Программная реализация P2P-чата с пользовательским интерфейсом. Работает как на Windows, так и на Linux и Mac Os.

В мессенджере реализована система аккаунтов.
Так как с устройством могут работать несколько пользователей, важно обеспечить как безопасность данных отдельного пользователя приложения, так и возможность нескольким операторам вести переписки содного устройства.
Каждый аккаунт привязан к идентификатору, который генерируется приложением в процессе регистрации.
Сменить его можно только в этот момент, после завершения регистрации id не будет доступен для изменения в настройках.
Для защиты доступа к аккаунту необходим пароль, он создаётся в момент регистрации.
В дальнейшем он будет использоваться для шифрования информации в базах данных, ключей для подписи сообщений.
Имя пользователя – это никнейм, который будет отображаться в диалогах.
Его можно изменять в настройках. Все вышеописанные параметры относятся к аккаунту пользователя, далее идут настройки сети.

![image](https://github.com/user-attachments/assets/0eba5fc3-e9c1-466c-a495-e57b3333ae96)

Приложение имеет ограничение – оно не может одновременно открывать соединения клиентам из локальной сети и теми, кто либо находится в другой локальной сети, либо имеет белый IP-адрес.
Поэтому пользователь должен указывать в настройках сети какую сеть он предпочитает использовать, изменить это можно в любое время в настройках.
DHT-ключ пользователя – это идентификатор в сети Kademlia, с его помощью пользователи могут запросит соединение друг с другом.
Ключ можно задать самостоятельно или оставить сгенерированный приложением, он должен быть составлен исключительно из латинских букв и цифр, также стоит отказаться от простых слов в ключе, чтобы исключить возможность образования коллизии с уже существующими узлами в распределенной хеш-таблице.
В DHT ключ преобразуется с помощью хеш-функции SHA-1.
Для подключения к распределенной таблице необходимо обозначить адрес корневой ноды.
Для добавления новой ноды в сеть ей необходимо присоединиться к уже участвующему в сети узлу.
Корневой узел может быть запущен как и по локальному IP-адресу, так и на глобальном, это никак не зависит от флага “Использовать локальный IР адрес”, о котором велась речь выше.

Далее идут порты, приложение имеет дефолтные значения, их можно поменять, но делать это рекомендуется только в том случае, если пользователь хочет запустить несколько экземпляров приложения на одном устройстве, или если данные порты задействованы другими приложениями.
Порт DHT-node – это порт, на котором принимает соединения корневая нода.
Порт DHT-node клиента – порт для локального узла распределенной таблицы, а порт приложения – это порт для прослушивающего сокета, позволяющего установку соединения с другими пользователями p2p-мессенджера.

![image](https://github.com/user-attachments/assets/2aeab9e6-5c1e-4cde-9af8-5fd906fe40b5)

По окончании регистрации пользователь попадает на главный экран, где может приступить к общению.
На экране отобразятся все диалоги и их содержимое.
Для создания диалога необходимо знать DHT-ключ собеседника.
После ввода ключа происходит попытка установить связь с клиентом по IP-адресу и порту, который соответствует хешу данного ключа в DHT.
Если соединение успешно установлено, то инициатор отправляет инициализационное сообщение, которое включает в себя публичный ключ RSA, хеш id пользователя, никнейм и публичный ключ для создания ключа диалога.
В ответном сообщении инициатору также придёт хеш id пользователя, никнейм и публичный ключ для создания ключа диалога, а RSA-ключ будет доступен из данных, лежащих в распределенной хеш таблице.
После этого они смогут обмениваться сообщениями.
Для проверки подключения клиенты обмениваются сообщениями с периодичностью в 5 секунд.
Если в течении 15 секунд ответное сообщение не будет отправлено, сессия автоматически закрывается.
История сообщений сохраняется в локальной базе данных, но могут возникать ситуации, когда в результате экстренного завершения программы у одного из клиентов сообщение не было записано в хранилище.
В таком случае при следующем соединении этих пользователей они обменяются списками идентификаторов из имеющихся в их локальной базе данных сообщений.
После сравнения с содержимым своих локальных хранилищ клиенты обменяются списками id недостающих сообщений, и получат их в ответных сообщений.
Таким образом обеспечивается согласованность истории сообщений.

![image](https://github.com/user-attachments/assets/741305db-0b4d-48dd-ad76-c61a1fc69ba0)

Помимо основных функций по передаче сообщений, программа предоставляет пользователю дополнительные возможности, которые направлены на улучшение и упрощение процесса использования приложения.
Например, пользователю доступно несколько тем оформления интерфейса, таких как простая, светлая и темная темы. Сменить тему можно в следующем разделе меню:

![image](https://github.com/user-attachments/assets/bcdaa205-ca00-44b3-8bed-239e6e516cbb)

Также пользователь имеет возможность поменять настройки аккаунта и сети, скопировать DHT-ключ, а также выйти из учетной записи:

![image](https://github.com/user-attachments/assets/cfef6be5-3f17-465c-9987-24405d2ed29a)
